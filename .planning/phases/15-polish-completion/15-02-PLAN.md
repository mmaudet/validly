---
phase: 15-polish-completion
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/src/pages/WorkflowDetailPage.tsx
  - frontend/src/components/workflow/WorkflowStepper.tsx
  - frontend/src/components/workflow/StepDetail.tsx
  - frontend/src/pages/TemplateFormPage.tsx
autonomous: true
requirements:
  - RESP-04
  - RESP-05

must_haves:
  truths:
    - "WorkflowDetailPage stepper, comments, and action buttons are usable on a 375px screen"
    - "WorkflowStepper phases wrap or scroll horizontally on narrow screens instead of overflowing"
    - "StepDetail cards stack properly on mobile with readable text and touch-friendly action areas"
    - "All interactive elements on WorkflowDetailPage meet 44x44px minimum touch target"
    - "TemplateFormPage form is usable on tablet-width screens (768px+)"
  artifacts:
    - path: "frontend/src/pages/WorkflowDetailPage.tsx"
      provides: "Responsive workflow detail with mobile layout"
      contains: "sm:"
    - path: "frontend/src/components/workflow/WorkflowStepper.tsx"
      provides: "Responsive stepper that works on narrow screens"
      contains: "sm:"
    - path: "frontend/src/components/workflow/StepDetail.tsx"
      provides: "Responsive step detail cards"
      contains: "sm:"
  key_links:
    - from: "frontend/src/pages/WorkflowDetailPage.tsx"
      to: "frontend/src/components/workflow/WorkflowStepper.tsx"
      via: "renders WorkflowStepper component"
      pattern: "WorkflowStepper"
    - from: "frontend/src/pages/WorkflowDetailPage.tsx"
      to: "frontend/src/components/workflow/StepDetail.tsx"
      via: "renders StepDetail component"
      pattern: "StepDetail"
---

<objective>
Make WorkflowDetailPage (stepper, step details, documents, actions) and TemplateFormPage fully usable on mobile devices.

Purpose: Validators and initiators need to view workflow progress, read step details, and interact with action buttons on their phones. The stepper and step cards currently assume desktop-width layouts.
Output: Responsive WorkflowDetailPage, WorkflowStepper, StepDetail, and TemplateFormPage.
</objective>

<execution_context>
@/Users/mmaudet/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mmaudet/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@frontend/src/pages/WorkflowDetailPage.tsx
@frontend/src/components/workflow/WorkflowStepper.tsx
@frontend/src/components/workflow/StepDetail.tsx
@frontend/src/pages/TemplateFormPage.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Make WorkflowStepper and StepDetail responsive</name>
  <files>
    frontend/src/components/workflow/WorkflowStepper.tsx
    frontend/src/components/workflow/StepDetail.tsx
  </files>
  <action>
**WorkflowStepper.tsx:**

The current stepper uses `flex items-start` with `flex-1` per phase, creating a horizontal line. On narrow screens (< 5 phases is fine, but with many phases it overflows).

Approach:
- Wrap the stepper container in `overflow-x-auto` so it scrolls horizontally on narrow screens.
- Add `min-w-fit` to the inner flex container to prevent shrinking.
- Each phase circle button already has `h-10 w-10` (40px). Increase to `h-11 w-11` (44px) to meet touch target requirement, or add `min-h-[44px] min-w-[44px]` explicitly.
- The phase name below: change `max-w-[100px]` to `max-w-[80px] sm:max-w-[100px]` to give more room on mobile.
- Keep the horizontal layout (not vertical) — a horizontal scrollable stepper is more intuitive for a progress indicator.

**StepDetail.tsx:**

- Step header row (`flex items-center gap-3 flex-wrap`): this is already flex-wrap, which is good. Ensure it works.
- Quorum + deadline row (`flex flex-wrap gap-4`): on mobile, stack vertically. Change to `flex flex-col sm:flex-row sm:flex-wrap gap-2 sm:gap-4`.
- Validators list: Already vertical, works fine on mobile.
- Actions history: The action row uses `flex items-center gap-2` with `ml-auto` on the date. On mobile, the date should wrap below. Change the action row to `flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2`. Move the date `<span>` so it appears on its own line on mobile: remove `ml-auto` and add `sm:ml-auto`.
- All step cards: the padding `p-4` is fine. Ensure the step card container has no fixed width constraints.
  </action>
  <verify>
Run `npx tsc --noEmit` from the frontend directory — no type errors.
At 375px viewport: stepper scrolls horizontally if phases overflow, phase circles are tappable (44px), step detail cards stack content properly.
  </verify>
  <done>
WorkflowStepper scrolls horizontally on mobile with 44px touch circles. StepDetail stacks quorum/deadline info and action history rows vertically on mobile. No overflow or text truncation issues at 375px.
  </done>
</task>

<task type="auto">
  <name>Task 2: Make WorkflowDetailPage layout and TemplateFormPage responsive</name>
  <files>
    frontend/src/pages/WorkflowDetailPage.tsx
    frontend/src/pages/TemplateFormPage.tsx
  </files>
  <action>
**WorkflowDetailPage.tsx:**

Header section:
- Current: `flex max-w-5xl items-center gap-4 px-4 py-3`. On mobile the back link + title + status badge could overflow.
- Change to: `flex max-w-5xl items-center gap-2 sm:gap-4 px-4 py-3 flex-wrap`. Add `min-w-0` to the title `<h1>` and `truncate` so long titles don't push the status badge off screen. On mobile, allow the status badge to wrap to the next line.
- Alternative: make header `flex-col sm:flex-row` with the back link on top and title+badge below.

Info bar:
- Current: `flex flex-wrap gap-6`. Change gap to `gap-3 sm:gap-6` for tighter mobile spacing.

Documents section:
- Each document row: `flex items-center gap-3 px-4 py-3`. Ensure preview/download buttons have `min-h-[44px]` touch target. Current text-xs buttons are too small for touch — increase to `text-sm px-3 py-2 min-h-[44px] inline-flex items-center`.
- On mobile, stack the document title and action buttons vertically: change to `flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3 px-4 py-3`.

Initiator actions section:
- Current: `flex flex-wrap items-center gap-3`. This wraps fine.
- Ensure notify and cancel buttons have `min-h-[44px]`: add the class.

Audit trail section:
- The audit table: wrap in `overflow-x-auto`.
- The show/hide and export CSV buttons: ensure `min-h-[44px]` touch target via padding.
- The header row with "Audit Trail" and buttons: change to `flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-3`.

**TemplateFormPage.tsx:**

This page uses `max-w-3xl` which is already reasonable for tablet. For mobile:
- The form inputs are already `w-full`, which is fine.
- The CircuitBuilderStep component (complex nested form) — this is acceptable as "tablet minimum" per research notes. Add a note: the circuit builder is usable at 768px+, not optimized for phone.
- The header: ensure cancel button has `min-h-[44px]`.
- The submit button at bottom: ensure `min-h-[44px]`.
- Main content padding: change `py-8` to `py-4 sm:py-8` for tighter mobile spacing.
  </action>
  <verify>
Run `npx tsc --noEmit` from the frontend directory — no type errors.
At 375px: WorkflowDetailPage header wraps nicely, document rows stack, action buttons are touch-friendly, audit table scrolls.
At 768px: TemplateFormPage form is usable and readable.
  </verify>
  <done>
WorkflowDetailPage is fully usable at 375px: header wraps, info bar compact, document rows stack, action buttons are 44px touch targets, audit table has overflow scroll. TemplateFormPage is usable at 768px+ with proper spacing adjustments.
  </done>
</task>

</tasks>

<verification>
1. Open WorkflowDetailPage at 375px — stepper scrolls, step details stack, documents stack, action buttons tappable
2. Open TemplateFormPage at 768px — form layout usable
3. All interactive elements on WorkflowDetailPage meet 44px touch target
4. At 1024px+ desktop layout: no visual regression
5. `npx tsc --noEmit` passes
</verification>

<success_criteria>
- WorkflowDetailPage stepper, comments, and actions are usable on 375px screen
- WorkflowStepper scrolls horizontally with 44px phase circles
- StepDetail cards stack properly on mobile
- Document preview/download buttons meet 44px touch target
- TemplateFormPage is usable on 768px+ tablet screens
- No TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/15-polish-completion/15-02-SUMMARY.md`
</output>
