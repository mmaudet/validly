---
phase: 15-polish-completion
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/src/components/layout/MobileNav.tsx
  - frontend/src/pages/DashboardPage.tsx
  - frontend/src/pages/AdminUsersPage.tsx
  - frontend/src/i18n/locales/en/common.json
  - frontend/src/i18n/locales/fr/common.json
autonomous: true
requirements:
  - RESP-06
  - RESP-03
  - RESP-05

must_haves:
  truths:
    - "At 375px width, navigation collapses to a hamburger icon that opens a mobile menu overlay"
    - "Dashboard submission and pending tables are readable on 375px — either horizontal scroll or card layout"
    - "All interactive elements in the dashboard (tabs, buttons, filters, table rows) meet 44x44px minimum touch target"
    - "Mobile menu includes all navigation items: dashboard link, bell/pending, locale toggle, user email, logout"
  artifacts:
    - path: "frontend/src/components/layout/MobileNav.tsx"
      provides: "Shared mobile navigation hamburger menu component"
      min_lines: 40
    - path: "frontend/src/pages/DashboardPage.tsx"
      provides: "Responsive dashboard with mobile-friendly tables and touch targets"
      contains: "sm:"
  key_links:
    - from: "frontend/src/pages/DashboardPage.tsx"
      to: "frontend/src/components/layout/MobileNav.tsx"
      via: "import and render in header"
      pattern: "MobileNav"
---

<objective>
Make the DashboardPage fully usable on mobile (375px+) and create a shared mobile navigation hamburger menu for all authenticated pages.

Purpose: Users on mobile devices need to navigate the app and read dashboard list views without horizontal overflow or tiny tap targets.
Output: MobileNav component, responsive DashboardPage with touch-friendly interactive elements.
</objective>

<execution_context>
@/Users/mmaudet/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mmaudet/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@frontend/src/pages/DashboardPage.tsx
@frontend/src/pages/AdminUsersPage.tsx
@frontend/src/components/layout/MobileNav.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create MobileNav component and integrate into DashboardPage header</name>
  <files>
    frontend/src/components/layout/MobileNav.tsx
    frontend/src/pages/DashboardPage.tsx
    frontend/src/i18n/locales/en/common.json
    frontend/src/i18n/locales/fr/common.json
  </files>
  <action>
Create `frontend/src/components/layout/MobileNav.tsx`:
- Accept props: `user` (email, role), `pendingCount` (number), `onLogout` (function), `onToggleLocale` (function), `currentLocale` (string).
- Render a hamburger button (three horizontal lines SVG) visible only below `sm:` breakpoint (i.e., `sm:hidden`). Use `min-h-[44px] min-w-[44px]` for touch target.
- On click, toggle open a full-screen overlay (`fixed inset-0 z-50 bg-white`) with nav items stacked vertically:
  - Dashboard link (`/dashboard`)
  - Pending actions with count badge (link to `/dashboard` with pending tab, or just a visual indicator)
  - Templates link (if useful)
  - Admin users link (only if `user.role === 'ADMIN'`)
  - Locale toggle button (FR/EN)
  - User email display
  - Logout button (red)
- Each nav item must have `min-h-[44px]` for touch compliance.
- Close button (X icon) in top-right with `min-h-[44px] min-w-[44px]`.
- Add i18n key `nav.menu` (EN: "Menu", FR: "Menu") for accessibility label.

Modify `frontend/src/pages/DashboardPage.tsx` header section:
- Import and render `MobileNav` in the header, passing the required props.
- The existing desktop header items (bell, locale, email, logout) should be wrapped with `hidden sm:flex` so they hide on mobile.
- The hamburger from MobileNav shows only on mobile (`sm:hidden`).
- The logo/app name should remain visible at all breakpoints.
  </action>
  <verify>
Run `npx tsc --noEmit` from the frontend directory — no type errors.
Visually inspect: at viewport < 640px, hamburger appears and desktop nav items are hidden. At >= 640px, desktop nav shows and hamburger is hidden.
  </verify>
  <done>
MobileNav component exists, renders hamburger below sm: breakpoint, opens full-screen overlay with all nav items meeting 44px touch target. DashboardPage header uses MobileNav on mobile and hides desktop nav items.
  </done>
</task>

<task type="auto">
  <name>Task 2: Make DashboardPage tables and tabs responsive with touch targets</name>
  <files>
    frontend/src/pages/DashboardPage.tsx
    frontend/src/pages/AdminUsersPage.tsx
  </files>
  <action>
In `DashboardPage.tsx`:

**Tabs section:**
- Change tab buttons from `px-6 py-3` to `px-3 py-3 sm:px-6` so they fit on narrow screens.
- Add `overflow-x-auto` and `flex-nowrap` to the tab container div so tabs can scroll horizontally if they overflow on very narrow screens.
- Ensure each tab button has `min-h-[44px]` touch target (the current py-3 on text-sm is approximately 40px, add `min-h-[44px]`).

**FilterBar component:**
- Change the search input from `w-48` to `w-full sm:w-48` so it fills available space on mobile.
- Wrap the date filter inputs: on mobile, stack them. Change the flex container to `flex flex-col sm:flex-row sm:flex-wrap gap-2`.
- Ensure all filter inputs and the clear button have `min-h-[44px]` (add this class).

**Submissions table (SubmissionsTab):**
- The table already has `overflow-x-auto` on its container, which is good.
- On mobile (< sm:), hide the "Current step" column using `hidden sm:table-cell` on both the `<th>` and corresponding `<td>`.
- Add `whitespace-nowrap` to the date column to prevent awkward line breaks.
- Ensure table rows have `min-h-[44px]` via padding: current `py-3` on text-sm is close, add explicit `min-h-[44px]` to `<tr>` elements.

**Pending table (PendingTab):**
- On mobile, hide the "Date" column using `hidden sm:table-cell`.
- The Initiator column: on mobile, truncate with `max-w-[120px] truncate` on the `<td>`.

**Page header (New Workflow button):**
- Ensure the "New workflow" button has `min-h-[44px]` touch target.

**Bulk archive action bar:**
- Make it responsive: `flex flex-col sm:flex-row` with `gap-2` so it stacks on mobile.

In `AdminUsersPage.tsx`:
- The users table is already in a separate page with its own header.
- Add `overflow-x-auto` wrapper around the table if not present.
- On mobile, hide the "Date" column (created_at) using `hidden sm:table-cell`.
- Integrate MobileNav into AdminUsersPage header the same way as DashboardPage (import MobileNav, show hamburger on mobile, hide desktop items with `hidden sm:flex`). The AdminUsersPage already has its own header with back link + logo + email — adapt it to include MobileNav for consistency.
- All action buttons (Edit, Delete) in the table: ensure `min-h-[44px] min-w-[44px]` via padding.
  </action>
  <verify>
Run `npx tsc --noEmit` from the frontend directory — no type errors.
In browser dev tools at 375px width: Dashboard tabs are scrollable/visible, table content is readable without horizontal scroll (hidden columns reduce width), all buttons/inputs meet 44px touch height.
  </verify>
  <done>
DashboardPage at 375px: tabs scrollable and touch-friendly, filters stack vertically, tables hide non-essential columns, all interactive elements are 44px minimum. AdminUsersPage: table has overflow-x-auto, non-essential columns hidden on mobile, MobileNav integrated.
  </done>
</task>

</tasks>

<verification>
1. Open DashboardPage at 375px viewport width — hamburger visible, tabs scrollable, table readable
2. Open AdminUsersPage at 375px — table readable, MobileNav works
3. All buttons, tabs, and filter inputs visually meet 44px minimum height
4. At 640px+ width, desktop layout unchanged (no visual regression)
5. `npx tsc --noEmit` passes
</verification>

<success_criteria>
- DashboardPage is fully navigable and readable on a 375px-wide screen
- Navigation collapses to hamburger menu on mobile with all nav items
- All interactive elements (tabs, buttons, inputs, table rows) meet 44x44px touch target
- AdminUsersPage table is readable on mobile with overflow handling
- No TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/15-polish-completion/15-01-SUMMARY.md`
</output>
