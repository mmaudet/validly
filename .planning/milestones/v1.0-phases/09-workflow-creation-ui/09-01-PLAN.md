---
phase: 09-workflow-creation-ui
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/src/pages/WorkflowCreatePage.tsx
  - frontend/src/pages/DashboardPage.tsx
  - frontend/src/App.tsx
  - frontend/src/i18n/locales/en/common.json
  - frontend/src/i18n/locales/fr/common.json
autonomous: true
requirements: []
must_haves:
  truths:
    - "A 'New Workflow' button is visible on the dashboard and navigates to the creation wizard"
    - "User can upload one or more documents and see them listed before proceeding"
    - "Wizard shows three steps: Documents, Circuit, Review with navigation controls"
  artifacts:
    - path: "frontend/src/pages/WorkflowCreatePage.tsx"
      provides: "Multi-step wizard page with useForm + FormProvider and DocumentUploadStep"
      min_lines: 80
    - path: "frontend/src/App.tsx"
      provides: "Route /workflows/new before /workflows/:id"
      contains: "/workflows/new"
    - path: "frontend/src/i18n/locales/en/common.json"
      provides: "English translations for wizard"
      contains: "wizard"
    - path: "frontend/src/i18n/locales/fr/common.json"
      provides: "French translations for wizard"
      contains: "wizard"
  key_links:
    - from: "frontend/src/pages/DashboardPage.tsx"
      to: "/workflows/new"
      via: "Link component"
      pattern: "to=.*workflows/new"
    - from: "frontend/src/App.tsx"
      to: "WorkflowCreatePage"
      via: "Route element before :id route"
      pattern: "path=.*workflows/new"
---

## Objective

Create the WorkflowCreatePage with multi-step wizard navigation, document upload step with file staging, "New Workflow" button on the dashboard, route in App.tsx, and all i18n keys for EN/FR.

Purpose: Establishes the page scaffold and first wizard step so subsequent plans can add circuit builder and review/launch.
Output: WorkflowCreatePage with working document upload step, accessible from dashboard.

## Context

```
@frontend/src/pages/DashboardPage.tsx
@frontend/src/App.tsx
@frontend/src/lib/api.ts
@frontend/src/hooks/useAuth.ts
@frontend/src/i18n/locales/en/common.json
@frontend/src/i18n/locales/fr/common.json
```

## Task 1: Route, Wizard Scaffold, "New Workflow" Button, i18n Keys

**Type:** auto
**Files:**
- `frontend/src/App.tsx`
- `frontend/src/pages/DashboardPage.tsx`
- `frontend/src/pages/WorkflowCreatePage.tsx` (create)
- `frontend/src/i18n/locales/en/common.json`
- `frontend/src/i18n/locales/fr/common.json`

**Action:**

1. **App.tsx** — Import WorkflowCreatePage. Add route `<Route path="/workflows/new" element={<AuthGuard><WorkflowCreatePage /></AuthGuard>} />` BEFORE the `/workflows/:id` route.

2. **DashboardPage.tsx** — Add a "New Workflow" button/link in the header area. Use `<Link to="/workflows/new">` with primary button styling. Use `t('workflow.create')` for the label.

3. **WorkflowCreatePage.tsx** (create) — Build the wizard scaffold:
   - Import `useForm`, `FormProvider` from react-hook-form
   - Define TypeScript types: WorkflowForm, PhaseForm, StepForm
   - `useState<number>(0)` for wizard step index (0=Documents, 1=Circuit, 2=Review)
   - `useState<File[]>([])` for staged files
   - `useForm<WorkflowForm>` with sensible defaults (1 phase, 1 step)
   - Wrap in `<FormProvider>`
   - Step indicator (3 dots/labels)
   - Title input always visible
   - Step content conditionally rendered
   - Back/Next navigation with `trigger()` validation
   - Step 0: DocumentUploadStep (Task 2)
   - Step 1: placeholder for circuit builder (Plan 02)
   - Step 2: placeholder for review (Plan 03)

4. **i18n EN** — Add `"wizard"` key block with all wizard labels
5. **i18n FR** — Add `"wizard"` key block with all wizard labels in French

## Task 2: Document Upload Step

**Type:** auto
**Files:**
- `frontend/src/pages/WorkflowCreatePage.tsx` (modify)

**Action:**

Implement DocumentUploadStep inside WorkflowCreatePage.tsx:
- Drop zone with onDragOver/onDragLeave/onDrop + hidden file input
- File staging (append to files state, filter duplicates by name+size)
- File list with name, formatted size, remove button
- Empty state message
- Block "Next" if no files staged

## Verification

- `cd frontend && npx tsc --noEmit` passes
- Navigate to `/dashboard` → see "New Workflow" button
- Click → reach `/workflows/new` with wizard scaffold
- Upload files via drag-drop or click → files listed
- Remove a file → disappears from list
- Cannot proceed without at least one file
